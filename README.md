# MOS å•†ç”¨å¹³å°

> åŸºäº [vue cli3.0](https://cli.vuejs.org/zh/) æ„å»ºçš„é€šç”¨ vue æŠ€æœ¯æ ˆæ–¹æ¡ˆ

## å‘½åè§„èŒƒ

- [x] æ–‡ä»¶å¤¹éœ€è¦å°å†™å¼€å¤´ï¼Œå°å†™é©¼å³°
- [x] vue ç»„ä»¶åç§°ï¼Œéœ€è¦å¤§å†™å¼€å¤´ï¼Œå¤§å†™é©¼å³°å½¢å¼

## é¡¹ç›®ç»“æ„

```txt
+-- dist/                                   ---æ‰“åŒ…ä¹‹åçš„distç›®å½•
+-- public/                                 ---é™æ€ç›®å½•,/xx ç›´æ¥é¥®ç”¨ï¼Œä¸éœ€è¦public
|   --- index.html                          ---é¦–é¡µå…¥å£htmlæ–‡ä»¶
|   --- favicon.ico                         ---ç½‘é¡µå›¾æ ‡
+-- src/
+   ---assets/                              --- èµ„æºæ–‡ä»¶
+   | +---/font                             --- å›¾æ ‡å­—ä½“
+   | +---/images                           --- å›¾ç‰‡èµ„æº
+   | +---/scss                             --- å…¬å…±æ ·å¼
+   ---/components/                         ---ç»„ä»¶ç›®å½•
+   | +---/base/                            ---åŸºæœ¬ç»„ä»¶
+   | +---/commons/                         ---å…¬å…±ç»„ä»¶åŒ…
+   | +---/layout/                          ---å¸ƒå±€æ–¹æ¡ˆ
+   | +---/mixins/                          ---mixins
+   | +---/**/**                            ---å…¶ä»–ä¸šåŠ¡ç»„ä»¶
+-- router/                                 ---è·¯ç”±æ–‡ä»¶
|   ---allRouter.js                        ---ç»„ä»¶é…ç½®è·¯ç”±æ–‡ä»¶
|   ---fn.js                                ---æ ¹æ®æƒé™åŠ¨æ€ç”Ÿæˆè·¯ç”±çš„æ–¹æ³•
|   ---index.js                             ---æ€»è·¯ç”±é…ç½®å…¥å£
+-- store/                                  ---vuex æ€» store ä¿¡æ¯
|   +---module                              ---æ ¹æ®ä¸šåŠ¡ç»„ä»¶åˆ’åˆ†çš„çŠ¶æ€
|   ---commAction.js                        ---é€šç”¨æ–¹æ³•
|   ---index.js                             ---æ€»vuexçŠ¶æ€é…ç½®ä¿¡æ¯
+-- utils/                                  ---vuex æ€» store ä¿¡æ¯
|   ---addressLinkage.js                    ---åŸå¸‚çº§è”ä¿¡æ¯
|   ---axios.js                             ---é€šç”¨axiosæ–¹æ³•
|   ---tools.js                             ---é€šç”¨å·¥å…·æ–¹æ³•
+-- view/                                   ---å¤šé¡µé¢é…ç½®ä¿¡æ¯
|   ---Error.vue                            ---404é¡µé¢
|   ---Login.vue                            ---ç™»å½•é¡µé¢
|   ---Welcome.vue                          ---æ¬¢è¿é¡µé¢
--- main.js                                 ---åº”ç”¨ç™»å½•åå…¥å£æ–‡ä»¶
--- login.js                                ---ç™»å½•é¡µå…¥å£æ–‡ä»¶
--- App.vue                                 ---åº”ç”¨å…¥å£
--- babel.config.js                         ---babelé…ç½®æ–‡ä»¶
--- README.md                               ---Readme
--- package.json                            ---ä¾èµ–åŒ…
--- vue.config.js                           ---é…ç½®vueè„šæ‰‹æ¶çš„æ–‡ä»¶ï¼ŒåŒ…å«æœ¬åœ°è·¨åŸŸã€base urlæ›´æ”¹ç­‰
```

## æŠ€æœ¯æ ˆ

- [vue2.0](https://cn.vuejs.org/)
- [axios0.18.0](https://github.com/axios/axios)
- [vuex3.1.0](https://vuex.vuejs.org/zh/)
- UI åº“ [iViewUI](https://www.iviewui.com/)
- [vue-router](https://router.vuejs.org/zh/)

## æœ¬åœ°å¼€å‘è¯´æ˜

### å¯åŠ¨é¡¹ç›®

0. æ‹‰å–é¡¹ç›®æ–‡ä»¶ `git clone git@code.data4truth.com:pi/pi-web.git -b dev`
1. å®‰è£… `npm install`
1. è¿è¡Œ `npm run serve`
1. éƒ¨ç½²

```
a.`git pull`éƒ¨ç½²ä¹‹å‰éœ€ç¡®ä¿ä»£ç ä¸ºæœ€æ–°ï¼Œå…·ä½“ä¸ºåŒæ­¥ feature å’Œ dev åˆ†æ”¯å†…å®¹ï¼›
b.æäº¤æœ¬åœ°ä¿¡æ¯ `git add .`ï¼Œ`git commit -m msg`,`git push`ã€‚æäº¤æ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œ`npm lint`æ ¡éªŒï¼Œæ•…è¯·ä¿è¯ä»£ç è¯­æ³•æ­£ç¡®
c. `npm run build` æ‰“åŒ…éƒ¨ç½²

```

### å¼€å‘æ–°é¡µé¢æµç¨‹

1. æ˜¯å¦å·²ç»é…ç½®è¿‡é¡µé¢  
   a. åœ¨ network é‡ŒæŸ¥çœ‹æ¥å£ /user-server/auth/user/powers çš„å“åº”ã€‚
2. é…ç½®è¿‡ï¼Œå°†æƒé™é‡Œçš„ value ç”¨ä½œ è·¯ç”±åç§°ã€‚
3. æ²¡æœ‰é…ç½®è¿‡ï¼Œæ‰¾åç«¯ user-server å¼€å‘ï¼ˆé™ˆåŸ¹æ¾ï¼‰æ·»åŠ ã€‚
4. æ·»åŠ æ—¶ï¼Œè¦å‘ŠçŸ¥åç«¯ï¼Œæƒé™ç±»å‹ã€æƒé™å­—æ®µåã€å¯¹åº”çš„åç§°ã€‚éœ€è¦æ·»åŠ çš„ç¯å¢ƒã€‚  
   a. æƒé™ç±»å‹ï¼šæŒ‰é’®æƒé™ã€èœå•æƒé™ã€‚  
   b. æƒé™å­—æ®µåï¼šä»çˆ¶çº§èœå•ä¾æ¬¡åˆ°å½“å‰èŠ‚ç‚¹ã€‚  
   c. å¯¹åº”åç§°ï¼Œè¦æ·»åŠ çš„èœå•åæˆ–æŒ‰é’®åã€‚

5. ğŸŒ°ï¼šæˆ‘è¦åœ¨ã€Œä¼šå‘˜ä¸­å¿ƒã€ï¼Œã€Œä¼šå‘˜ç®¡ç†ã€ä¸‹æ·»åŠ ä¸€ä¸ªã€Œä¼šå‘˜æŸ¥è¯¢ã€èœå•ã€‚æˆ‘ç»™åç«¯å‘çš„æ¶ˆæ¯æ˜¯è¿™æ ·çš„ã€‚  
   a. åŸ¹æ¾ï¼Œæ’å¤ªå¼€å‘ç¯å¢ƒï¼Œæ–°å¢èœå• ã€Œä¼šå‘˜æŸ¥è¯¢ã€ member-manage-queryã€‚  
   b. åç«¯åŒå­¦æ·»åŠ åï¼Œåœ¨æ¥å£ /user-server/auth/user/powers ä¸­æŸ¥çœ‹æ˜¯å¦æ­£ç¡®ã€‚

### æ’å¤ªæƒé™ç®¡ç†

1. æ’å¤ªæœ‰ä¸‰ç§æƒé™ï¼šé¡µé¢æƒé™ã€æŒ‰é’®æƒé™ã€çœŸå®ä¸šåŠ¡æƒé™ã€‚  
   a. åŸºæœ¬é€»è¾‘ï¼šæœ‰æƒé™å°±æ˜¾ç¤ºï¼Œæ²¡æœ‰å°±éšè—ã€‚  
   b. æŒ‰é’®æƒé™ä¾æ‰˜äºé¡µé¢æƒé™ï¼Œé…ç½®äº†é¡µé¢æƒé™ï¼Œæ‰èƒ½æœ‰æŒ‰é’®æƒé™ã€‚  
   c. çœŸå®ä¸šåŠ¡æƒé™ï¼šåªæœ‰å¯¹åº”çš„ç»„ç»‡æ‰èƒ½æ“ä½œï¼Œæ ¹æ®æ¥å£æ¥åˆ¤æ–­ã€‚  
   d. é¡¹ç›®çš„æ‰€æœ‰æƒé™ï¼šhttps://shimo.im/sheets/PTVJyKpV9c93tj3c/JWJz0ã€‚
2. æ¯ä¸€ä¸ªç”¨æˆ·éƒ½å¯¹åº”ä¸€ä¸ªè§’è‰²ï¼Œä¿®æ”¹ç”¨æˆ·æƒé™éœ€è¦ä¿®æ”¹è§’è‰²æƒé™ã€‚
3. é…ç½®è§’è‰²æƒé™æ­¥éª¤  
   a. è¿›å…¥é¡µé¢ï¼šå¹³å°ç®¡ç†ï¼šç»„ç»‡ç®¡ç† -> è§’è‰²ç®¡ç†  
   b. é€‰æ‹©è‡ªå·±çš„è§’è‰²ï¼Œç‚¹å‡»ç¼–è¾‘ï¼Œåœ¨åˆ†é…æƒé™ä¸‹å‹¾é€‰éœ€è¦çš„æƒé™ã€‚
4. æƒé™é…ç½®æ‰¾ user-server å¼€å‘ï¼ˆé™ˆåŸ¹æ¾ï¼‰
5. ä¸æ˜ç¡®çš„æƒé™å…ˆæ‰¾äº§å“ç¡®è®¤æ¸…æ¥šã€‚å¦‚æœæ˜¯æ–°é¡µé¢ï¼Œéœ€è¦åœ¨æ¯ä¸€ä¸ªç¯å¢ƒéƒ½é…ç½®ä¸€ä¸‹ã€‚  
   a. æ¯”å¦‚å¼€å‘æ—¶é…ç½®äº†å¼€å‘ç¯å¢ƒï¼Œææµ‹æ—¶è¦æé†’åç«¯å°†æƒé™åŒæ­¥åˆ°æµ‹è¯•ç¯å¢ƒã€‚

## UI è®¾è®¡ç¨¿

> å…·ä½“å‚è€ƒ[è“æ¹–è®¾è®¡ç¨¿å¹³å°](https://lanhuapp.com/web)

## åå° API äº¤äº’ï¼ˆåŸºäºåå°æ˜¯å¾®æœåŠ¡æ¡†æ¶ï¼‰

> å…·ä½“å‚è€ƒ[å°å¹ºé¸¡åå°æ–‡æ¡£](http://183.131.202.186:8080/xiaoyaoji/dashboard)

- ä¼šå‘˜å’Œç”¨æˆ·ç›¸å…³å‰ç¼€åŠ  `/user-server`/xxx
- ä¼˜æƒ åˆ¸ç›¸å…³å‰ç¼€åŠ  `/coupon-server`/xxx
- æ ‡ç­¾ç›¸å…³å‰ç¼€åŠ  `/label-server`/xxx
- å•†åŸç›¸å…³å‰ç¼€åŠ  `/mall-server`/xxx
- ç­‰çº§ç§¯åˆ†ç­‰ crm ç›¸å…³å‰ç¼€åŠ  `/crm-server`/xxx
- æ´»åŠ¨ç›¸å…³å‰ç¼€åŠ  `/marketing-server`/xxx
- çŸ­ä¿¡æ¶ˆæ¯ç›¸å…³å‰ç¼€åŠ  `/message-server`/xxx

## å…¶ä»–è¯´æ˜

#### `main.js` æ–‡ä»¶é‡Œåœ¨ vue åŸå‹ä¸Šç»‘å®šé‡Œå¾ˆå¤šå®ç”¨çš„æ–¹æ³•ï¼Œè¯¸å¦‚

- axios è¯·æ±‚ã€$ajaxGet,$ajaxPostã€‘
- loadash æ–¹æ³•ã€`$_`ã€‘
- æ—¶é—´æ ¼å¼è½¬åŒ–æ–¹æ³• ã€\$format(time,'è‡ªå®šä¹‰æ—¶é—´æ ¼å¼')ã€‘
- ä¸€äº›å·¥å…·æ–¹æ³•ã€ä¾‹å¦‚ $backIcon,$saveImage,\$filterPhone ç­‰ã€‘

#### è§„èŒƒ

- åˆ†æ”¯è§„èŒƒ

ç”±äºè¯¥é¡¹ç›®æ¶‰åŠæ¿å—è¾ƒå¤šï¼Œè¯·åŠ¡å¿…éµå¾ª[åˆ†æ”¯è§„èŒƒ](https://code.data4truth.com/FrontEnd/pub-material/blob/master/%E9%A1%B9%E7%9B%AE%E5%88%86%E6%94%AF%E7%AE%A1%E6%8E%A7%E8%AF%B4%E6%98%8E%EF%BC%88%E8%A7%A3%E7%99%BE%E9%9B%86%E5%9B%A2%E4%B8%BA%E4%BE%8B%EF%BC%89.md)è¿›è¡Œå¼€å‘

- [ä¸Šçº¿è§„èŒƒ](https://code.data4truth.com/FrontEnd/pub-material/blob/master/%E5%89%8D%E7%AB%AF%E4%B8%8A%E7%BA%BF%E8%A7%84%E8%8C%83%EF%BC%88%E8%A7%A3%E7%99%BE%E4%B8%BA%E4%BE%8B%EF%BC%89.md)

#### ç¯å¢ƒä¿¡æ¯

- 13 ç¯å¢ƒ

```
    æœåŠ¡å™¨åœ°å€ï¼š-

    ä»£ç è·¯å¾„ï¼š-

    åŸŸååœ°å€ï¼š-
```

- 154 ç¯å¢ƒ

```
    æœåŠ¡å™¨åœ°å€ï¼š-

    ä»£ç è·¯å¾„ï¼š-

    åŸŸååœ°å€ï¼š-
```
